import{r as l,b as q,n as k,o as A,c as L,j as e,L as F,h as M,i as V,p as h,k as g,E as y,a as O,M as U,l as Z,V as _}from"./index-B6zJEr8W.js";import{U as z}from"./user-tlErmWFu.js";const $=()=>{const[o,N]=l.useState(!1),[i,f]=l.useState(!1),[j,n]=l.useState(!1),[w,b]=l.useState(""),{signUp:v,loading:m}=q(),{showError:c}=k(),u=A(),{register:t,handleSubmit:P,watch:S,formState:{errors:s},setError:d}=L(),C=S("password"),E=async r=>{var x,p;if(r.password!==r.confirmPassword){d("confirmPassword",{type:"manual",message:"Passwords do not match"}),c("Registration Error","Passwords do not match. Please ensure both passwords are identical.","error");return}console.log("ðŸš€ Starting user registration with data:",{email:r.email,fullName:r.fullName,storeName:r.storeName,role:"owner"});try{const a=await v(r.email,r.password,{full_name:r.fullName,store_name:r.storeName,role:"owner"});if(console.log("ðŸ“Š Registration result:",a),a!=null&&a.error)console.error("âŒ Registration error:",a.error),c("Registration Failed",a.error.message||"Registration failed. Please try again.","error"),d("root",{type:"manual",message:a.error.message||"Registration failed"});else{console.log("âœ… Registration successful!");const R=((p=(x=a==null?void 0:a.data)==null?void 0:x.user)==null?void 0:p.email)||r.email;b(R),n(!0),_.success("Account created! Please check your email to verify your account.",{duration:5e3})}}catch(a){console.error("ðŸ’¥ Registration exception:",a),c("Registration Error",a.message||"An unexpected error occurred. Please try again.","error"),d("root",{type:"manual",message:"Registration failed: "+a.message})}};return m?e.jsx(F,{text:"Creating account..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create your account"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Set up your POS system in minutes"})]}),e.jsxs("form",{onSubmit:P(E),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",...t("fullName",{required:"Full name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:"input pl-10",placeholder:"Enter your full name",autoComplete:"name"})]}),s.fullName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.fullName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Store Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",...t("storeName",{required:"Store name is required",minLength:{value:2,message:"Store name must be at least 2 characters"}}),className:"input pl-10",placeholder:"Enter your store name",autoComplete:"organization"})]}),s.storeName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.storeName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",...t("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"input pl-10",placeholder:"Enter your email",autoComplete:"email"})]}),s.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:o?"text":"password",...t("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),className:"input pl-10 pr-10",placeholder:"Create a password",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>N(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?e.jsx(g,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"})})]}),s.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:i?"text":"password",...t("confirmPassword",{required:"Please confirm your password",validate:r=>r===C||"Passwords do not match"}),className:"input pl-10 pr-10",placeholder:"Confirm your password",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>f(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?e.jsx(g,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"})})]}),s.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.confirmPassword.message})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"terms",type:"checkbox",...t("terms",{required:"You must accept the terms and conditions"}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500 mt-0.5"}),e.jsxs("label",{htmlFor:"terms",className:"ml-2 text-sm text-gray-700",children:["I agree to the"," ",e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-500",children:"Terms and Conditions"})," ","and"," ",e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})]}),s.terms&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.terms.message}),s.root&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-600",children:s.root.message})}),e.jsx("button",{type:"submit",disabled:m,className:"btn btn-primary btn-lg w-full",children:m?"Creating account...":"Create account"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(O,{to:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Sign in here"})]})}),e.jsx(U,{isOpen:j,onClose:()=>{n(!1),u("/login")},title:"Verify your email",size:"md",children:e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsx(Z,{type:"info",message:`We've sent a verification link to ${w||"your email address"}. Please confirm your email to be able to log in.`}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>{n(!1),u("/login")},children:"Go to Login"})})]})})]})};export{$ as default};
//# sourceMappingURL=Register-DmD4AP1r.js.map

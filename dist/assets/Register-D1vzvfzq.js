import{r as c,h as b,n as v,o as P,b as C,j as e,L as S,e as E,i as R,p as d,k as u,E as x,a as q,V as A}from"./index-B8kRnX3K.js";import{U as L}from"./user-oAWE94xs.js";const U=()=>{const[l,p]=c.useState(!1),[o,h]=c.useState(!1),{signUp:g,loading:i}=b(),{showError:n}=v(),N=P(),{register:t,handleSubmit:y,watch:j,formState:{errors:s},setError:m}=C(),w=j("password"),f=async a=>{if(a.password!==a.confirmPassword){m("confirmPassword",{type:"manual",message:"Passwords do not match"}),n("Registration Error","Passwords do not match. Please ensure both passwords are identical.","error");return}console.log("ðŸš€ Starting user registration with data:",{email:a.email,fullName:a.fullName,storeName:a.storeName,role:"owner"});try{const r=await g(a.email,a.password,{full_name:a.fullName,store_name:a.storeName,role:"owner"});console.log("ðŸ“Š Registration result:",r),r!=null&&r.error?(console.error("âŒ Registration error:",r.error),n("Registration Failed",r.error.message||"Registration failed. Please try again.","error"),m("root",{type:"manual",message:r.error.message||"Registration failed"})):(console.log("âœ… Registration successful!"),A.success("Account created successfully! You can now sign in.",{duration:5e3}),setTimeout(()=>{N("/login")},1e3))}catch(r){console.error("ðŸ’¥ Registration exception:",r),n("Registration Error",r.message||"An unexpected error occurred. Please try again.","error"),m("root",{type:"manual",message:"Registration failed: "+r.message})}};return i?e.jsx(S,{text:"Creating account..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create your account"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Set up your POS system in minutes"})]}),e.jsxs("form",{onSubmit:y(f),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",...t("fullName",{required:"Full name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:"input pl-10",placeholder:"Enter your full name",autoComplete:"name"})]}),s.fullName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.fullName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Store Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",...t("storeName",{required:"Store name is required",minLength:{value:2,message:"Store name must be at least 2 characters"}}),className:"input pl-10",placeholder:"Enter your store name",autoComplete:"organization"})]}),s.storeName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.storeName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",...t("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"input pl-10",placeholder:"Enter your email",autoComplete:"email"})]}),s.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:l?"text":"password",...t("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),className:"input pl-10 pr-10",placeholder:"Create a password",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>p(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?e.jsx(u,{className:"w-5 h-5"}):e.jsx(x,{className:"w-5 h-5"})})]}),s.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:o?"text":"password",...t("confirmPassword",{required:"Please confirm your password",validate:a=>a===w||"Passwords do not match"}),className:"input pl-10 pr-10",placeholder:"Confirm your password",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>h(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?e.jsx(u,{className:"w-5 h-5"}):e.jsx(x,{className:"w-5 h-5"})})]}),s.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.confirmPassword.message})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"terms",type:"checkbox",...t("terms",{required:"You must accept the terms and conditions"}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500 mt-0.5"}),e.jsxs("label",{htmlFor:"terms",className:"ml-2 text-sm text-gray-700",children:["I agree to the"," ",e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-500",children:"Terms and Conditions"})," ","and"," ",e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})]}),s.terms&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.terms.message}),s.root&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-600",children:s.root.message})}),e.jsx("button",{type:"submit",disabled:i,className:"btn btn-primary btn-lg w-full",children:i?"Creating account...":"Create account"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(q,{to:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Sign in here"})]})})]})};export{U as default};
//# sourceMappingURL=Register-D1vzvfzq.js.map
